'use strict';

Object.defineProperty(exports, "__esModule", {
	value: true
});

var _conventionalCommitsParser = require('conventional-commits-parser');

var _conventionalChangelogAngular = require('conventional-changelog-angular');

var _conventionalChangelogAngular2 = _interopRequireDefault(_conventionalChangelogAngular);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

exports.default = parse;


function parse(message, parser = _conventionalCommitsParser.sync, parserOpts) {
	return new Promise(function ($return, $error) {
		var changelogOpts, parsed;

		if (!parserOpts || Object.keys(parserOpts || {}).length === 0) {
			return Promise.resolve(_conventionalChangelogAngular2.default).then(function ($await_2) {
				try {
					changelogOpts = $await_2;

					parserOpts = changelogOpts.parserOpts;
					return $If_1.call(this);
				} catch ($boundEx) {
					return $error($boundEx);
				}
			}.bind(this), $error);
		}

		function $If_1() {
			parsed = parser(message, parserOpts);

			parsed.raw = message;
			return $return(parsed);
		}

		return $If_1.call(this);
	}.bind(this));
}
module.exports = exports['default'];
//# sourceMappingURL=index.js.map