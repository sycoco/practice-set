'use strict';

Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.getRequestCredential = getRequestCredential;
exports.setRequestCredential = setRequestCredential;
exports.removeRequestCredential = removeRequestCredential;

var _jsCookie = require('js-cookie');

var _jsCookie2 = _interopRequireDefault(_jsCookie);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var localStorage = window.localStorage; /**
                                         * @author Kuitos
                                         * @homepage https://github.com/kuitos/
                                         * @since 2016-09-29
                                         */

var JSON = window.JSON;

var REQUEST_TOKEN_STORAGE_KEY = 'ccmsRequestCredential';

function getRequestCredential() {

	var credential = null;
	// get credential from cookie when inside an iframe
	if (window.self !== window.top) {
		credential = _jsCookie2.default.get(REQUEST_TOKEN_STORAGE_KEY) || null;
	} else {
		credential = localStorage.getItem(REQUEST_TOKEN_STORAGE_KEY) || null;
	}

	return JSON.parse(credential);
}

function setRequestCredential(credential) {
	localStorage.setItem(REQUEST_TOKEN_STORAGE_KEY, JSON.stringify(credential));
	_jsCookie2.default.set(REQUEST_TOKEN_STORAGE_KEY, JSON.stringify(credential));
}

function removeRequestCredential() {
	localStorage.removeItem(REQUEST_TOKEN_STORAGE_KEY);
	_jsCookie2.default.remove(REQUEST_TOKEN_STORAGE_KEY);
}