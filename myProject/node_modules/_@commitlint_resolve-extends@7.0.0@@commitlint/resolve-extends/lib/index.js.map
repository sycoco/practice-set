{"version":3,"sources":["../src/index.js"],"names":["resolveExtends","config","context","e","extends","extended","loadExtends","reduceRight","r","c","console","warn","reduce","configs","raw","load","require","resolved","resolveConfig","cwd","dirname","ctx","parserPreset","resolvedParserPreset","name","path","relative","process","split","sep","join","parserOpts","getId","prefix","first","charAt","scoped","filter","String","resolve","resolveId","id","err","legacy","localPath","resolveFromSilent","globalPath","resolveGlobalSilent","Error","code","resolveGlobal"],"mappings":"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","file":"index.js","sourcesContent":["import path from 'path';\n\nimport 'resolve-global'; // eslint-disable-line import/no-unassigned-import\nimport requireUncached from 'require-uncached';\nimport resolveFrom from 'resolve-from';\nimport merge from 'lodash.merge';\nimport omit from 'lodash.omit';\n\n// Resolve extend configs\nexport default function resolveExtends(config = {}, context = {}) {\n\tconst {extends: e} = config;\n\tconst extended = loadExtends(config, context).reduceRight(\n\t\t(r, c) => merge(r, omit(c, 'extends')),\n\t\te ? {extends: e} : {}\n\t);\n\n\t// Remove deprecation warning in version 3\n\tif (typeof config === 'object' && 'wildcards' in config) {\n\t\tconsole.warn(\n\t\t\t`'wildcards' found in top-level configuration ignored. Remove them from your config to silence this warning.`\n\t\t);\n\t}\n\n\treturn merge({}, extended, config);\n}\n\n// (any, string, string, Function) => any[];\nfunction loadExtends(config = {}, context = {}) {\n\treturn (config.extends || []).reduce((configs, raw) => {\n\t\tconst load = context.require || require;\n\t\tconst resolved = resolveConfig(raw, context);\n\t\tconst c = load(resolved);\n\t\tconst cwd = path.dirname(resolved);\n\n\t\t// Remove deprecation warning in version 3\n\t\tif (typeof c === 'object' && 'wildcards' in c) {\n\t\t\tconsole.warn(\n\t\t\t\t`'wildcards' found in '${raw}' ignored. To silence this warning raise an issue at 'npm repo ${raw}' to remove the wildcards.`\n\t\t\t);\n\t\t}\n\n\t\tconst ctx = merge({}, context, {cwd});\n\n\t\t// Resolve parser preset if none was present before\n\t\tif (\n\t\t\t!context.parserPreset &&\n\t\t\ttypeof c === 'object' &&\n\t\t\ttypeof c.parserPreset === 'string'\n\t\t) {\n\t\t\tconst resolvedParserPreset = resolveFrom(cwd, c.parserPreset);\n\t\t\tconst parserPreset = {\n\t\t\t\tname: c.parserPreset,\n\t\t\t\tpath: `./${path.relative(process.cwd(), resolvedParserPreset)}`\n\t\t\t\t\t.split(path.sep)\n\t\t\t\t\t.join('/'),\n\t\t\t\tparserOpts: require(resolvedParserPreset)\n\t\t\t};\n\n\t\t\tctx.parserPreset = parserPreset;\n\t\t\tconfig.parserPreset = parserPreset;\n\t\t}\n\n\t\treturn [...configs, c, ...loadExtends(c, ctx)];\n\t}, []);\n}\n\nfunction getId(raw = '', prefix = '') {\n\tconst first = raw.charAt(0);\n\tconst scoped = first === '@';\n\tconst relative = first === '.';\n\treturn scoped || relative ? raw : [prefix, raw].filter(String).join('-');\n}\n\nfunction resolveConfig(raw, context = {}) {\n\tconst resolve = context.resolve || resolveId;\n\tconst id = getId(raw, context.prefix);\n\n\ttry {\n\t\treturn resolve(id, context);\n\t} catch (err) {\n\t\tconst legacy = getId(raw, 'conventional-changelog-lint-config');\n\t\tconst resolved = resolve(legacy, context);\n\t\tconsole.warn(\n\t\t\t`Resolving ${raw} to legacy config ${legacy}. To silence this warning raise an issue at 'npm repo ${legacy}' to rename to ${id}.`\n\t\t);\n\t\treturn resolved;\n\t}\n}\n\nfunction resolveId(id, context = {}) {\n\tconst cwd = context.cwd || process.cwd();\n\tconst localPath = resolveFromSilent(cwd, id);\n\n\tif (typeof localPath === 'string') {\n\t\treturn localPath;\n\t}\n\n\tconst globalPath = resolveGlobalSilent(id);\n\n\tif (typeof globalPath === 'string') {\n\t\treturn globalPath;\n\t}\n\n\tconst err = new Error(`Cannot find module \"${id}\" from \"${cwd}\"`);\n\terr.code = 'MODULE_NOT_FOUND';\n\tthrow err;\n}\n\nfunction resolveFromSilent(cwd, id) {\n\ttry {\n\t\treturn resolveFrom(cwd, id);\n\t} catch (err) {}\n}\n\nfunction resolveGlobalSilent(id) {\n\ttry {\n\t\tconst resolveGlobal = requireUncached('resolve-global');\n\t\treturn resolveGlobal(id);\n\t} catch (err) {}\n}\n"]}